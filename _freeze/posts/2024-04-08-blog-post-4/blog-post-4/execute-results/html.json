{
  "hash": "b784106cb8fcbfd0d8797da68dc7bf25",
  "result": {
    "markdown": "---\ntitle: \"Blog Post 4\"\nauthor: \"Team\"\ndate: \"2024-04-08\"\ndate-modified: \"2024-04-08\"\ndraft: FALSE\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary libraries\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(ggcorrplot) \nlibrary(GGally)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRegistered S3 method overwritten by 'GGally':\n  method from   \n  +.gg   ggplot2\n```\n:::\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(dplyr)\nlibrary(lubridate)\n\n\n# Read the dataset\ndata <- readRDS(\"dataset/nypd_shooting_clean.rds\")\n\n# Display the first few rows of the dataset\nhead(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 19\n  INCIDENT_KEY OCCUR_DATE BORO     PRECINCT JURISDICTION_CODE LOC_CLASSFCTN_DESC\n         <dbl> <chr>      <chr>       <dbl>             <dbl> <chr>             \n1    243566884 04/12/2022 BRONX          49                 0 STREET            \n2    256484816 12/17/2022 BRONX          52                 0 STREET            \n3    250216145 08/27/2022 BRONX          44                 0 VEHICLE           \n4    239207164 01/15/2022 QUEENS        113                 2 HOUSING           \n5    248013313 07/14/2022 BROOKLYN       77                 0 DWELLING          \n6    247542571 07/04/2022 BRONX          48                 0 STREET            \n# ℹ 13 more variables: LOCATION_DESC <chr>, STATISTICAL_MURDER_FLAG <lgl>,\n#   PERP_AGE_GROUP <chr>, PERP_SEX <chr>, PERP_RACE <chr>, VIC_AGE_GROUP <chr>,\n#   VIC_SEX <chr>, VIC_RACE <chr>, X_COORD_CD <dbl>, Y_COORD_CD <dbl>,\n#   Latitude <dbl>, Longitude <dbl>, Lon_Lat <chr>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convert 'OCCUR_DATE' to datetime format\ndata <- data %>%\n  mutate(OCCUR_DATE = dmy(OCCUR_DATE), \n         OCCUR_YEAR = year(OCCUR_DATE))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `OCCUR_DATE = dmy(OCCUR_DATE)`.\nCaused by warning:\n!  1017 failed to parse.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprep_race_counts <- data |>\n  count(PERP_RACE) |>\n  arrange(desc(n))\n\nggplot(prep_race_counts, aes(x = reorder(PERP_RACE, n), y = n, fill = PERP_RACE)) + \n  geom_bar(stat = \"identity\") +\n  theme_minimal() +\n  labs(title = \"Perpetrator Race Distribution\", x = \"Perpetrator Race\", y = \"Count\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nWe created a bar chart to analyze the perpetrator’s race, a key variable of interest for later investigation in our project. The chart revealed approximately 600 missing (null) values for this variable, indicating a potential challenge that requires our attention.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate proportions Blog Post 4\nproportions <- data %>%\n  group_by(PERP_RACE) %>%\n  summarise(Proportion = mean(STATISTICAL_MURDER_FLAG == \"TRUE\", na.rm = TRUE))\n\n# Create the plot\nggplot(proportions, aes(x = PERP_RACE, y = Proportion, fill = PERP_RACE)) +\n  geom_bar(stat = \"identity\") +\n  theme_minimal() +\n  labs(title = \"Proportion of Incidents Classified as Statistical Murders by Perpetrator Race\",\n       x = \"Perpetrator Race\",\n       y = \"Proportion\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmod1 <- glm(\n  STATISTICAL_MURDER_FLAG ~ PERP_RACE + PERP_AGE_GROUP + PERP_SEX,\n  data = data, \n  family = \"binomial\"\n)\nmod1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:  glm(formula = STATISTICAL_MURDER_FLAG ~ PERP_RACE + PERP_AGE_GROUP + \n    PERP_SEX, family = \"binomial\", data = data)\n\nCoefficients:\n                      (Intercept)  PERP_RACEASIAN / PACIFIC ISLANDER  \n                        -1.737692                           1.446710  \n                   PERP_RACEBLACK            PERP_RACEBLACK HISPANIC  \n                         1.017721                           1.337634  \n                   PERP_RACEWHITE            PERP_RACEWHITE HISPANIC  \n                         0.777739                           1.097492  \n                PERP_AGE_GROUP<18                PERP_AGE_GROUP18-24  \n                        -0.931793                          -0.630785  \n              PERP_AGE_GROUP25-44                PERP_AGE_GROUP45-64  \n                        -0.555683                           0.132840  \n                PERP_AGE_GROUP65+                          PERP_SEXF  \n                               NA                          -0.007563  \n                        PERP_SEXM  \n                               NA  \n\nDegrees of Freedom: 1705 Total (i.e. Null);  1695 Residual\nNull Deviance:\t    1698 \nResidual Deviance: 1669 \tAIC: 1691\n```\n:::\n:::\n\n\nWe made a logistic model using murder statistics as y variable and PERP_RACE, PERP_AGE_GROUP, and PERP_SEX as predictors. And based on the bar plot above, Asian/pacific islander has the largest proportion of Incidents Classified as Statistical Murders by Perpetrator Race.",
    "supporting": [
      "blog-post-4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}